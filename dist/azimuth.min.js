function azimuth(a,b,c,d,{units:e="m",distancePrecision:f=0,formula:g="great-circle",bearingPrecision:h=0,directionPrecision:i=1}={}){var j=Number.prototype,k=Math.sqrt,l=Math.round,m=Math.cos,n=Math.sin,o=Math.atan2,p=Math.abs,r=Math.log,s=Math.tan,t=Math.PI;function u(a){return a*(t/180)}function v(a){return a*(180/t)}if(isNaN(a)||isNaN(c)||isNaN(b)||isNaN(d)||isNaN(h)||isNaN(i))throw new Error("Latitude/Longitude parameter is not a number!");if(90<p(a)||90<p(c)||180<p(b)||180<p(d))throw new Error("Latitude/Longitude parameter exceeding maximal value!");if(isNaN(f)||isNaN(h)||15<f||15<h)throw new Error("Precision parameter is not a number or exceeds it's maximum value of 15!");if(!["m","km","ft","yd","mi","nm"].includes(e))throw new Error("Units parameter type not supported!");if(!["great-circle","rhumb-line"].includes(g))throw new Error("Calculation formula type parameter not supported!");const w=6371009;j.round=function(a=0){let b=new Number(this.valueOf());return+(l(b+"e+"+a)+"e-"+a)};let q={};const x=function(a,b="m"){if("m"===b)return a;switch(b){case"km":return .001*a;break;case"ft":return 3.28084*a;break;case"yd":return 1.0936*a;break;case"mi":return 621371e-9*a;break;case"nm":return 539957e-9*a;break;default:return a;}}("rhumb-line"===g?function(a,b,c,d){if(a===c&&b===d)return 0;const e=u(a),f=u(c),g=u(a-c),h=u(b-d),i=r(s(t/4+f/2)/s(t/4+e/2)),j=1e-11<p(i)?g/i:m(e);p(h)>t&&(0<h?h=-(2*t-h):h=2*t+h);const l=k(g*g+j*j*h*h)*w;return l}(a,b,c,d):function(b,d,e,f){if(b===e&&d===f)return 0;const g=u(b),h=u(e),i=u(b-e),j=u(d-f),l=n(i/2)*n(i/2)+m(g)*m(h)*n(j/2)*n(j/2),a=2*o(k(l),k(1-l));return w*a}(a,b,c,d),e).round(f);q.distance=x,q.units=e;const y=0==x?"":("rhumb-line"===g?function(a,b,c,d){if(a===c&&b===d)return 0;const e=u(a),f=u(c);let g=u(d-b);const h=r(s(t/4+f/2)/s(t/4+e/2));p(g)>t&&(0<g?g=-(2*t-g):g=2*t+g);const i=o(g,h),j=(v(i)+360)%360;return j}(a,b,c,d):function(a,b,c,d){const e=u(a),f=u(c),g=u(d-b),h=n(g)*m(f),i=m(e)*n(f)-n(e)*m(f)*m(g),j=o(h,i),k=(v(j)+360)%360;return k}(a,b,c,d)).round(h);return q.bearing=y,q.formula=g,0!==i&&(q.direction=0==x?"":function(a,b){if(isNaN(a)||isNaN(b)){throw new Error("Parameter is not a number!")}if(0>a||360<a){throw new Error("Parameter outside of range!")}if(1>b||3<b){throw new Error("Parameter outside of range!")}let c=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],d=4;2===b&&(d=8),3===b&&(d=16);let e=360/d,f=c.length/d,g=l(a/e)*f;return(()=>c.length)&&(g=0),c[g]}(y,i)),q}