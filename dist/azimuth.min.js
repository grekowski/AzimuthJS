function azimuth(a,b,c,d,{units:e="m",distancePrecision:f=0,method:g="great-circle",bearingPrecision:h=0,directionPrecision:i=1}={}){var j=Number.prototype,k=Math.sqrt,l=Math.cos,m=Math.sin,n=Math.atan2,o=Math.abs,p=Math.log,r=Math.tan,s=Math.PI;function t(a){return a*(s/180)}function u(a){return a*(180/s)}if(isNaN(a)||isNaN(c)||isNaN(b)||isNaN(d)||isNaN(h)||isNaN(i))throw new Error("Parameter is not a number!");if(90<o(a)||90<o(c)||180<o(b)||180<o(d))throw new Error("Parameter exceeding maximal value!");const v=6371009;j.round=function(a=0){var b=Math.round;let c=new Number(this.valueOf());return+(b(c+"e+"+a)+"e-"+a)};let q={distance:("rhumb-line"===g?function(a,b,c,d){const e=t(a),f=t(c),g=t(a-c),h=t(b-d),i=p(r(s/4+f/2)/r(s/4+e/2)),j=1e-11<o(i)?g/i:l(e);o(h)>s&&(0<h?h=-(2*s-h):h=2*s+h);const m=k(g*g+j*j*h*h)*v;return m}(a,b,c,d):function(b,d,e,f){const g=t(b),h=t(e),i=t(b-e),j=t(d-f),o=m(i/2)*m(i/2)+l(g)*l(h)*m(j/2)*m(j/2),a=2*n(k(o),k(1-o));return v*a}(a,b,c,d)).round(f),units:e};const w=function(a,b="m"){if("m"===b)return a;switch(b){case"km":return .001*a;break;case"ft":return 3.28084*a;break;case"yd":return 1.0936*a;break;case"mi":return 621371e-9*a;break;case"nm":return 539957e-9*a;break;default:return a;}}("rhumb-line"===g?function(a,b,c,d){const e=t(a),f=t(c);let g=t(d-b);const h=p(r(s/4+f/2)/r(s/4+e/2));o(g)>s&&(0<g?g=-(2*s-g):g=2*s+g);const i=n(g,h),j=(u(i)+360)%360;return j}(a,b,c,d):function(a,b,c,d){const e=t(a),f=t(c),g=t(d-b),h=m(g)*l(f),i=l(e)*m(f)-m(e)*l(f)*l(g),j=n(h,i),k=(u(j)+360)%360;return k}(a,b,c,d),e).round(h);return q.bearing=w,q.method=g,0!==i&&(q.direction=function(a,b){if(isNaN(a)||isNaN(b)){throw new Error("Parameter is not a number!")}if(0>a||360<a){throw new Error("Parameter outside of range!")}if(1>b||3<b){throw new Error("Parameter outside of range!")}if(1==b){var c=90,d=c/2,e=d+c,f=e+c,g=f+c;if(a<=d)return"N";if(a<=e)return"E";if(a<=f)return"S";if(a<=g)return"W";if(a>g)return"N"}if(2==b){var c=45,d=c/2,h=d+c,e=h+c,i=e+c,f=i+c,j=f+c,g=j+c,k=g+c;if(a<=d)return"N";if(a>d&&a<=h)return"NE";if(a>h&&a<=e)return"E";if(a>e&&a<=i)return"SE";if(a>i&&a<=f)return"S";if(a>f&&a<=j)return"SW";if(a>j&&a<=g)return"W";if(a>g&&a<=k)return"NW";if(a>k)return"N"}if(3==b){var c=360/16,d=c/2,l=d+c,h=l+c,m=h+c,e=m+c,n=e+c,i=n+c,o=i+c,f=o+c,p=f+c,j=p+c,q=j+c,g=q+c,r=g+c,k=r+c,s=k+c;if(a<=d)return"N";if(a<=l)return"NNE";if(a<=h)return"NE";if(a<=m)return"ENE";if(a<=e)return"E";if(a<=n)return"ESE";if(a<=i)return"SE";if(a<=o)return"SSE";if(a<=f)return"S";if(a<=p)return"SSW";if(a<=j)return"SW";if(a<=q)return"WSW";if(a<=g)return"W";if(a<=wnwTo)return"WNW";if(a<=k)return"NW";if(a<=s)return"NNW";if(a>s)return"N"}return""}(w,i)),q}