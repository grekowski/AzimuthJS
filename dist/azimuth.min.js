function azimuth(a,b,c,d,{units:e="m",distancePrecision:f=0,bearingPrecision:g=0,directionPrecision:h=1}={}){var i=Number.prototype,j=Math.atan2,k=Math.abs,l=Math.PI;function m(a){return a*(l/180)}function n(a){return a*(180/l)}function o(a,b="m"){if("m"===b)return a;switch(b){case"km":return .001*a;break;case"ft":return 3.28084*a;break;case"yd":return 1.0936*a;break;case"mi":return 621371e-9*a;break;case"nm":return 539957e-9*a;break;default:return a;}}if(isNaN(a)||isNaN(c)||isNaN(b)||isNaN(d)||isNaN(g)||isNaN(h))throw new Error("Parameter is not a number!");if(90<k(a)||90<k(c)||180<k(b)||180<k(d))throw new Error("Parameter exceeding maximal value!");i.round=function(a=0){var b=Math.round;let c=new Number(this.valueOf());return+(b(c+"e+"+a)+"e-"+a)};let p={distance:function(b,d,e,f,g){var h=Math.sqrt,i=Math.cos,k=Math.sin;const l=m(b),n=m(e),p=m(b-e),q=m(d-f),r=k(p/2)*k(p/2)+i(l)*i(n)*k(q/2)*k(q/2),a=2*j(h(r),h(1-r));return o(6371009*a,g)}(a,b,c,d).round(f),units:e};const q=function(a,b,c,d){var e=Math.log,f=Math.tan;startLatitude=m(a),startLongitude=m(b),endLatitude=m(c),endLongitude=m(d);var g=endLongitude-startLongitude,h=e(f(endLatitude/2+l/4)/f(startLatitude/2+l/4));return k(g)>l&&(0<g?g=-(2*l-g):g=2*l+g),(n(j(g,h))+360)%360}(a,b,c,d).round(g);return p.bearing=q,0!==h&&(p.direction=function(a,b){if(isNaN(a)||isNaN(b)){throw new Error("Parameter is not a number!")}if(0>a||360<a){throw new Error("Parameter outside of range!")}if(1>b||3<b){throw new Error("Parameter outside of range!")}if(1==b){var c=90,d=c/2,e=d+c,f=e+c,g=f+c;if(a<=d)return"N";if(a<=e)return"E";if(a<=f)return"S";if(a<=g)return"W";if(a>g)return"N"}if(2==b){var c=45,d=c/2,h=d+c,e=h+c,i=e+c,f=i+c,j=f+c,g=j+c,k=g+c;if(a<=d)return"N";if(a>d&&a<=h)return"NE";if(a>h&&a<=e)return"E";if(a>e&&a<=i)return"SE";if(a>i&&a<=f)return"S";if(a>f&&a<=j)return"SW";if(a>j&&a<=g)return"W";if(a>g&&a<=k)return"NW";if(a>k)return"N"}if(3==b){var c=360/16,d=c/2,l=d+c,h=l+c,m=h+c,e=m+c,n=e+c,i=n+c,o=i+c,f=o+c,p=f+c,j=p+c,q=j+c,g=q+c,r=g+c,k=r+c,s=k+c;if(a<=d)return"N";if(a<=l)return"NNE";if(a<=h)return"NE";if(a<=m)return"ENE";if(a<=e)return"E";if(a<=n)return"ESE";if(a<=i)return"SE";if(a<=o)return"SSE";if(a<=f)return"S";if(a<=p)return"SSW";if(a<=j)return"SW";if(a<=q)return"WSW";if(a<=g)return"W";if(a<=wnwTo)return"WNW";if(a<=k)return"NW";if(a<=s)return"NNW";if(a>s)return"N"}return""}(q,h)),p}